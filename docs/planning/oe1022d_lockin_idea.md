# OE1022D DSP Lock-In Amplifier 远程控制说明书特点及转换注意事项

## 1. 说明书主要特点
- **命令参考手册类型**：以远程控制指令（SCPI-like 风格）为主，包含查询（?）与设置两种模式。
- **大量参数映射表格**：几乎每条指令都配有详细的数值映射表（如 SENS D 的 0~27 对应 1 nV/fA ~ 1 V/μA）。
- **整数编码参数**：大量使用数字代码表示设置（如 FPOPD 的 k=0~32+ 表示不同输出量，配置参数从 8246 开始的连续编码）。
- **功能分类清晰**：
  - 5.2.4 灵敏度与时间常数（SENS D、RMODD、OFLTD、OFSLD、SYNCD）
  - 5.2.5 显示与输出（FPOPD）
  - A通道配置参数（Sweep、Sineout、Equation、Gain TC Input Filter 等）
- **双语特性**：中文详细说明 + 英文命令名称/参数缩写。
- **表格密集**：宽表（多列）、长表（30+ 行）常见，包含单位（nV/fA、μs、ms、s、dB/oct）、科学符号。
- **精确性要求高**：错误一个数字就可能导致设备控制失效。

## 2. Docling OCR 转 Markdown 时特别注意事项
1. **表格提取质量**（最重要）
   - 检查列对齐（尤其是 FPOPD k 参数表、配置参数代码表）
   - 确保长列表不被截断或合并行
   - 推荐使用 Docling 的高级表格模式或后处理修复

2. **数字与单位准确性**
   - 重点校验：灵敏度值、时间常数、参数代码（8246~8406 区间）、小数点、科学计数
   - 单位：nV/fA、μV/pA、mV/nA、μs、ms、s、dB/oct、V 等必须正确识别

3. **命令语法保留**
   - 正确提取：`SENS D (?) i [, j]`、`FPOPD (?) j [, k]`、`OFLTD (?) i [, j]` 等
   - 可选参数 `[ ]` 和查询符 `?` 不要丢失
   - 建议用代码块包裹：```text\nSENS D (?) i [, j]\n```

4. **中文文本处理**
   - 确保技术术语一致性（如“灵敏度”、“动态储备模式”、“低通滤波器滚降”、“同步滤波器”）
   - 避免繁简转换错误

5. **结构与元数据保留**
   - 保留节号（5.2.4、5.2.5）和页码（64、65、77）
   - 使用 Markdown 标题层级：# 5.2.4 灵敏度和时间常数指令

6. **常见 OCR 问题**
   - 表格边框导致的合并单元格
   - 希腊字母 μ 被误认
   - 连字符、括号、逗号缺失
   - 建议：OCR 后人工校对所有表格（至少关键页）

## 3. 构建 AI 知识库时的特别注意事项
1. **知识分块策略**
   - 推荐：每条指令作为一个独立 chunk（命令名 + 语法 + 描述 + 参数表）
   - 大表格单独拆分成子 chunk 或转为结构化 JSON

2. **结构化存储建议**
   - 命令基本信息（名称、语法、功能分类）
   - 参数映射表（最好存为 Markdown 表格 + 可查询的 key-value）
   - 示例：FPOPD k=0 → "A-R"，k=17 → "B-R"

3. **增强检索能力**
   - 添加元数据：功能标签（灵敏度、时间常数、输出类型、滤波器、扫描、方程）
   - 同义词：灵敏度、sensitivity、SENS D
   - 数值查询支持（如“200 nV/fA 对应哪个值”）

4. **准确性与验证**
   - 关键表格必须 100% 人工验证
   - 建立交叉验证：检查 SENS D 与 RMODD 的通道参数是否一致
   - 保留来源页码，便于溯源

5. **其他优化**
   - 处理宽表：转为垂直列表或多个小表
   - 多语言支持：考虑保留中英双语或添加英文版本
   - 图像/图示：如果 PDF 中有接线图、面板图，需单独提取并描述
   - Chunk 大小控制：避免单个 chunk 超过 1500~2000 tokens（大表格易超）

## 4. 推荐处理流程
1. Docling OCR → 初步 Markdown
2. 人工校对所有表格（重点：第64、65、77页示例）
3. 拆分指令为结构化条目
4. 转换为向量数据库（添加元数据）
5. 测试典型查询（“FPOPD 输出 A-X 对应哪个 k？”“时间常数 100 ms 对应 j 值？”）

此文档可直接发给 Codex/Claude/Grok 等辅助工具，作为转换提示使用。