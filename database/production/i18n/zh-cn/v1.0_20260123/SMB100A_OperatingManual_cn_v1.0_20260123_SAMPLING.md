---
title: SMB100A 射频与微波信号发生器操作手册 (中文版)
version: 1.0.0
generated_date: 2026-01-23
source_document: docs/SMB100A_OperatingManual_en_23.md
translator_engine: DeepSeek-V3
pipeline_version: 1.2.0
status: Draft - Sample Run (Remote Control)
cost: $0.0080
---

## 5.3 SCPI 指令结构

SCPI 指令由标头和一个或多个参数组成。标头可能包含多个助记符（关键词）。查询通过在标头后直接附加问号来形成。

指令可以是仪器特定的或仪器无关的（通用指令）。通用指令和仪器特定指令在语法上有所不同。

## 5.3.1 通用指令的语法

通用（= 仪器无关）指令由一个以星号 (*) 开头的头部组成，可能还包含一个或多个参数。

表 5-2：通用指令示例

| *RST   | 复位 (RESET)                | 复位仪器。                              |
|--------|----------------------|-----------------------------------------------------|
| *ESE   | 事件状态使能 (EVENT STATUS ENABLE)  | 设置事件状态使能寄存器的位。 |
| *ESR?  | 事件状态查询 (EVENT STATUS QUERY)   | 查询事件状态寄存器的内容。  |
| *IDN?  | 标识查询 (IDENTIFICATION QUERY) | 查询仪器标识字符串。       |

## SCPI 指令结构

## 5.3.2 仪器特定指令的语法

<!-- image -->

以下示例中使用的指令并非全部在仪器中实现。仅出于演示目的，本节假设存在以下指令：

- DISPlay[:WINDow<1...4>]:MAXimize <Boolean>
- FORMat:READings:DATA <type>[,<length>]
- HCOPy:DEVice:COLor <Boolean>
- HCOPy:DEVice:CMAP:COLor:RGB <red>,<green>,<blue>
- HCOPy[:IMMediate]
- HCOPy:ITEM:ALL
- HCOPy:ITEM:LABel <string>
- HCOPy:PAGE:DIMensions:QUADrant[<N>]
- HCOPy:PAGE:ORIentation LANDscape | PORTrait
- HCOPy:PAGE:SCALe <numeric value>
- MMEMory:COPY <file_source>,<file_destination>
- SENSE:BANDwidth|BWIDth[:RESolution] <numeric_value>
- SENSe:FREQuency:STOP <numeric value>
- SENSe:LIST:FREQuency <numeric_value>{,<numeric_value>}
- ●
- 长形式和短形式..............................................................................................264

●

数字后缀....................................................................................................264

- 可选助记符............................................................................................. 265

## 5.3.2.1 长格式和短格式

助记符具有长格式和短格式。短格式由大写字母标记，长格式对应于完整的单词。可以输入短格式或长格式；不允许使用其他缩写。

## 示例：

HCOPy:DEVice:COLor ON 等同于 HCOP:DEV:COL ON。

## 大小写不敏感

大写和小写符号仅用于在手册中区分两种形式，仪器本身是大小写不敏感的。

<!-- image -->

## 5.3.2.2 数字后缀

如果一个指令可以应用于对象的多个实例（例如特定通道或源），则可以通过添加到指令的后缀来指定所需的实例。数字后缀用尖括号表示（&lt;1...4&gt;、&lt;n&gt;、&lt;i&gt;），并在指令中被替换

<!-- image -->

为单个值。没有后缀的条目被解释为具有后缀 1。

## 示例：

定义：

HCOPy:PAGE:DIMensions:QUADrant[&lt;N&gt;]

指令：

HCOP:PAGE:DIM:QUAD2

此指令指代象限 2。

## 远程控制中的不同编号

在远程控制中，后缀可能与手动操作中相应选择的编号不同。SCPI 规定后缀计数从 1 开始。后缀 1 是默认状态，在未指定特定后缀时使用。

某些标准定义了固定的编号，从 0 开始。如果手动操作和远程控制中的编号不同，会在相应指令中注明。

## 5.3.2.3 可选助记符

某些指令系统允许在头部插入或省略特定的助记符。这些助记符在描述中用方括号标记。仪器必须能识别长指令以符合 SCPI 标准。通过这些可选助记符，一些指令可以显著缩短。

## 示例：

定义：

HCOPy[:IMMediate]

指令：

HCOP:IMM 等同于 HCOP

## 带数字后缀的可选助记符

如果可选助记符包含对指令效果相关的数字后缀，则不要省略它。

## 示例：

定义：DISPlay[:WINDow<1...4>]:MAXimize <Boolean>

指令：

DISP:MAX ON 指窗口 1。

要引用窗口 1 以外的窗口，您必须包含可选的 WINDow 参数及其所需窗口的后缀。

DISP:WIND2:MAX ON 指窗口 2。

## 5.3.3 SCPI 参数

许多指令都附带一个参数或参数列表。参数必须与指令头之间用一个“空白字符”（ASCII 码 0 到 9、11 到 32 十进制，例如空格）分隔。

每个指令所需的参数及其允许的取值范围在指令描述中指定。

<!-- image -->

## 允许的参数包括：

| ● 数值.....................................................................................................     | 266   |
|---------------------------------------------------------------------------------------------------------------------------|-------|
| ● 特殊数值.........................................................................................266      |       |
| ● 布尔参数..............................................................................................267     |       |
| ● 文本参数....................................................................................................     | 267   |
| ● 字符串...................................................................................................268 |       |
| ● 块数据............................................................................................................. | 268   |

## 5.3.3.1 数值

数值可以以任何形式输入，即带符号、小数点和指数。超过仪器分辨率的数值会向上或向下舍入。尾数最多可包含 255 个字符，指数必须在 -32000 到 32000 的范围内。指数由 "E" 或 "e" 引入。不允许单独输入指数。

## 示例：

SENS:FREQ:STOP 1500000 = SENS:FREQ:STOP 1.5E6

## 单位

对于物理量，可以输入单位。如果未指定单位，则使用基本单位。允许的单位前缀包括：

- G（吉）
- MA（兆）、MOHM、MHZ
- K（千）
- M（毫）
- U（微）
- N（纳）

## 示例：

```
SENSE: FREQ: STOP   1 . 5GHz = SENSE: FREQ: STOP   1 . 5E 9

```

某些设置允许以百分比形式指定相对值。根据 SCPI 标准，此单位由 PCT 字符串表示。

## 示例：

HCOP:PAGE:SCAL 90PCT

## 5.3.3.2 特殊数值

以下助记符代表特殊数值。在查询响应中，会提供相应的数值。

- MIN 和 MAX：表示最小值（MINimum）和最大值（MAXimum）。
- DEF：表示预设值（DEFault），该值已存储在 EPROM 中。此值符合默认设置，如同通过 *RST 指令调用时一样。

<!-- image -->

- UP 和 DOWN：将数值增加或减少一个步长。步长可以通过为每个参数分配的步长指令来指定，这些参数可以通过 UP 和 DOWN 进行设置。
- INF 和 NINF：INFinity（INF）和 Negative INFinity（NINF）分别代表数值 9.9E37 或 -9.9E37。INF 和 NINF 仅作为仪器响应发送。
- NAN：Not A Number（NAN）代表值 9.91E37。NAN 仅作为仪器响应发送。此值未定义。可能的原因包括零除以零、无穷大减去无穷大以及缺失值的表示。

## 示例：

```
- Endpoint:
          Setting command: SENSE:LIST:FREQ MAXiumm

          Query: SENS:LIST:FREQ?

          Response: 3.5E9

```

## 特殊数值查询

与 MAXimum/MINimum/DEFault 相关的数值可以通过在问号后添加相应的助记符来查询。

示例：SENSe:LIST:FREQ? MAXimum

返回最大数值作为结果。

## 5.3.3.3 布尔参数

布尔参数表示两种状态。“ON”状态（逻辑真）由“ON”或数值 1 表示。“OFF”状态（逻辑假）由“OFF”或数值 0 表示。数值作为查询的响应提供。

## 示例：

设置指令：HCOPy:DEV:COL ON 查询：HCOPy:DEV:COL? 响应：1

## 5.3.3.4 文本参数

文本参数遵循助记符的语法规则，即可以使用短形式或长形式输入。与任何参数一样，它们必须通过空格与指令头部分隔开。在查询响应中，会提供文本的短形式。

## 示例：

```
&lt;
            Setting command: HCOPY: PAGE:ORIation LANDscape
            &lt;
            Query: HCOPY: PAGE:ORI?
            &lt;
            Response: LAND

```

## 5.3.3.5 字符串

始终在引号（' 或 "）内输入字符串。

## 示例：

```
HCOP: ITEM:LABEL "Test1"
    HCOP: ITEM:LABEL "Test1'

```

## 5.3.3.6 块数据

块数据是一种适合传输大量数据的格式。例如，使用块数据参数的指令具有以下结构：

```
FORMat::READings::DATA  # 45 1 6 8 x x x x x x x

```

ASCII 字符 # 引入数据块。下一个数字表示后续有多少位数字描述数据块的长度。在示例中，后续的 4 位数字表示长度为 5168 字节。随后是数据字节。在传输这些数据字节期间，所有结束符或其他控制符号都会被忽略，直到所有字节传输完毕。

#0 指定一个长度不确定的数据块。使用不确定格式需要 NL^END 消息来终止数据块。当传输长度未知，或者由于速度或其他考虑因素无法将数据分割成确定长度的块时，这种格式很有用。

## 5.3.4 语法元素概述

以下表格提供了语法元素和特殊字符的概述。

表 5-3：语法元素

| :     | 冒号用于分隔指令的助记符。                                                              |
|-------|--------------------------------------------------------------------------------------------------------------|
| ;     | 分号用于分隔命令行中的两个指令。它不会改变路径。                          |
| ,     | 逗号用于分隔指令的多个参数。                                                         |
| ?     | 问号用于构成查询。                                                                             |
| *     | 星号标记一个通用指令。                                                                         |
| ' ' " | 引号用于引入和终止字符串（单引号和双引号均可使用）。 |

## SCPI 指令结构

#

井号 (#) 用于引入以下数制：

- 八进制： #O7612
- 二进制： #B10110
- 十六进制： #HF3A7
- 块数据： #21312

“空白字符”（ASCII 码 0 至 9、11 至 32 十进制，例如空格）用于分隔指令头与参数。

## 表 5-4：特殊字符

## | 参数

参数定义中的竖线表示替代可能性，意为“或”。指令的效果取决于所使用的参数。

示例：

定义：HCOPy:PAGE:ORIentation LANDscape | PORTrait

指令 HCOP:PAGE:ORI LAND 指定横向方向

指令 HCOP:PAGE:ORI PORT 指定纵向方向

## 助记符

对于多个指令，存在一组具有相同效果的助记符。这些助记符在同一行中表示，用竖线分隔。在指令头部只需包含其中一个助记符。指令的效果与使用哪个助记符无关。

示例：

定义 SENSE:BANDwidth|BWIDth[:RESolution] &lt;numeric_value&gt;

可以创建以下两个含义相同的指令：

SENS:BAND:RES 1

SENS:BWID:RES 1

- [ ] 方括号中的助记符是可选的，可以插入到头部或省略。

示例：HCOPy[:IMMediate]

HCOP:IMM 等同于 HCOP

- { } 花括号中的参数是可选的，可以插入一次或多次，或省略。

示例：SENSe:LIST:FREQuency &lt;numeric_value&gt;{,&lt;numeric_value&gt;}

以下是有效的指令：

SENS:LIST:FREQ 10

SENS:LIST:FREQ 10,20

SENS:LIST:FREQ 10,20,30,40

## 5.3.5 命令行结构

命令行可能由一个或多个指令组成。它由以下之一终止：

- &lt;新行&gt;
- 带 EOI 的 &lt;新行&gt;
- 与最后一个数据字节一起的 EOI

命令行中的多个指令必须用分号 ";" 分隔。

## SCPI 指令结构

## 示例：

MMEM:COPY "Test1","MeasurementXY" ;: HCOP:ITEM ALL

该命令行包含两条指令。第一条指令属于 MMEM 系统，第二条指令属于 HCOP 系统。如果下一条指令属于不同的指令系统，分号后需跟一个冒号。

## 示例：

HCOP:ITEM ALL ;: HCOP:IMM

该命令行包含两条指令。两条指令均属于 HCOP 指令系统，即它们有一个共同的层级。

如果连续指令属于同一系统，且有一个或多个共同层级，则可以缩写命令行。缩写命令行时，第二条指令从 HCOP 的下一个层级开始。分号后的冒号被省略。命令行的缩写形式如下：

HCOP:ITEM ALL ; IMM

## 示例：

```
HCOP: IT TERM ALL
  HCOP: IMM

```

新命令行始终以完整路径开头。

## 5.3.6 查询响应

除非另有明确说明，否则每个设置命令都定义了一个查询。查询是通过在相关设置命令后添加问号形成的。根据 SCPI 标准，查询响应部分遵循比标准 IEEE 488.2 更严格的规则。

- 请求的参数在传输时不带标头。
- 最大值、最小值以及通过特殊文本参数请求的所有其他量都以数值形式返回。
- 数值输出时不带单位。物理量参考基本单位或使用 Unit 命令设置的单位。例如，响应 3.5E9 代表 3.5 GHz。
- 真值（布尔值）返回为 0（表示 OFF）和 1（表示 ON）。

示例：HCOP:PAGE:ORI? 响应：LAND

示例：

SENSe:FREQuency:STOP? MAX

响应：3.5E9

## 示例：

设置指令：HCOPy:DEV:COL ON 查询：HCOPy:DEV:COL? 响应：1

- 文本（字符数据）以简短形式返回。示例：

SCPI 指令结构

<!-- image -->

指令序列与同步

设置指令：

HCOPy:PAGE:ORIentation LANDscape

查询：

HCOP:PAGE:ORI?

响应：

LAND

- 无效数值结果

有时，特别是当结果包含多个数值时，无效值会返回为 9.91E37（非数字）。